<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Лабораторная: Взаимодействие зарядов</title>
<style>
    body{
        background:#eef;
        display:flex;
        flex-direction:column;
        align-items:center;
        justify-content:center;
        height:100vh;
        font-family:Arial;
    }

    .lab-block{
        border:2px solid #0077ff;
        border-radius:12px;
        padding:20px;
        text-align:center;
        background:#fff;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .row{
        display:flex;
        justify-content:center;
        gap:80px;
        margin:25px;
        position:relative;
        height:100px;
    }

    .circle{
        width:60px;
        height:60px;
        border-radius:50%;
        background:#4cb4ff;
        color:white;
        font-size:35px;
        display:flex;
        align-items:center;
        justify-content:center;
        position:relative;
    }

    .arrow{
        position:absolute;
        width:60px;
        height:4px;
        background:red;
        top:28px;
        left:50%;
        transform-origin:left center;
        transform:rotate(0deg) scaleX(0);
        transition: transform 0.5s ease;
    }

    .label{
        position:absolute;
        top:-25px;
        width:100px;
        text-align:center;
        font-weight:bold;
        color:#333;
    }

    button{
        padding:12px 25px;
        font-size:18px;
        cursor:pointer;
        border:none;
        border-radius:8px;
        background:#0077ff;
        color:white;
        margin-bottom:10px;
    }
</style>
</head>
<body>

<div class="lab-block">
    <button id="toggleBtn">Старт</button>

    <div class="row" id="row1">
        <div class="circle" id="m1">−</div>
        <div class="circle" id="m2">−</div>
        <div class="arrow" id="arrow1"></div>
        <div class="label" id="label1"></div>
    </div>

    <div class="row" id="row2">
        <div class="circle" id="p1">+</div>
        <div class="circle" id="n1">−</div>
        <div class="arrow" id="arrow2"></div>
        <div class="label" id="label2"></div>
    </div>

    <div class="row" id="row3">
        <div class="circle" id="p2">+</div>
        <div class="circle" id="p3">+</div>
        <div class="arrow" id="arrow3"></div>
        <div class="label" id="label3"></div>
    </div>
</div>

<!-- Звуки -->
<audio id="soundAttract" src="https://freesound.org/data/previews/341/341695_6260043-lq.mp3"></audio>
<audio id="soundRepel" src="https://freesound.org/data/previews/66/66717_931655-lq.mp3"></audio>

<script>
let running = false;
const toggleBtn = document.getElementById("toggleBtn");

const m1 = document.getElementById("m1");
const m2 = document.getElementById("m2");
const p1 = document.getElementById("p1");
const n1 = document.getElementById("n1");
const p2 = document.getElementById("p2");
const p3 = document.getElementById("p3");

const arrow1 = document.getElementById("arrow1");
const arrow2 = document.getElementById("arrow2");
const arrow3 = document.getElementById("arrow3");

const label1 = document.getElementById("label1");
const label2 = document.getElementById("label2");
const label3 = document.getElementById("label3");

const soundAttract = document.getElementById("soundAttract");
const soundRepel = document.getElementById("soundRepel");

let timers = [];

toggleBtn.addEventListener("click", ()=>{
    running = !running;
    toggleBtn.textContent = running ? "Стоп" : "Старт";

    if(running){
        startAnimation();
    } else {
        // Сброс
        timers.forEach(t=>clearTimeout(t));
        timers = [];
        [m1,m2,p1,n1,p2,p3].forEach(c=>c.style.transform = "translateX(0px)");
        [arrow1,arrow2,arrow3].forEach(a=>a.style.transform="rotate(0deg) scaleX(0)");
        [label1,label2,label3].forEach(l=>l.textContent="");
    }
});

function startAnimation(){

    // ---- Пара 1 (- -) ----
    label1.textContent = "Отталкивание";
    arrow1.style.transform = "rotate(0deg) scaleX(1)";
    soundRepel.play();
    m1.style.transition = "transform 0.5s cubic-bezier(0.68,-0.55,0.27,1.55)";
    m2.style.transition = "transform 0.5s cubic-bezier(0.68,-0.55,0.27,1.55)";
    m1.style.transform = "translateX(40px)";
    m2.style.transform = "translateX(-40px)";

    timers.push(setTimeout(()=>{
        m1.style.transform = "translateX(-120px)";
        m2.style.transform = "translateX(120px)";
    }, 700));

    // ---- Пара 2 (+ -) ----
    timers.push(setTimeout(()=>{
        label2.textContent = "Притяжение";
        arrow2.style.transform = "rotate(0deg) scaleX(1)";
        soundAttract.play();
        p1.style.transition = "transform 0.8s cubic-bezier(0.68,-0.55,0.27,1.55)";
        n1.style.transition = "transform 0.8s cubic-bezier(0.68,-0.55,0.27,1.55)";
        p1.style.transform = "translateX(40px)";
        n1.style.transform = "translateX(-40px)";
    }, 300));

    // ---- Пара 3 (+ +) ----
    timers.push(setTimeout(()=>{
        label3.textContent = "Отталкивание";
        arrow3.style.transform = "rotate(0deg) scaleX(1)";
        soundRepel.play();
        p2.style.transition = "transform 0.5s cubic-bezier(0.68,-0.55,0.27,1.55)";
        p3.style.transition = "transform 0.5s cubic-bezier(0.68,-0.55,0.27,1.55)";
        p2.style.transform = "translateX(40px)";
        p3.style.transform = "translateX(-40px)";
    }, 400));

    timers.push(setTimeout(()=>{
        p2.style.transform = "translateX(-120px)";
        p3.style.transform = "translateX(120px)";
    }, 1100));
}
</script>

</body>
</html>
